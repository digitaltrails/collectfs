<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
 "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd"
 [<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">]>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="generator" content="groff -Txhtml, see www.gnu.org"/>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII"/>
<meta name="Content-Style" content="text/css"/>
<style type="text/css">
       .center { text-align: center }
       .right  { text-align: right }
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<!-- Creator     : groff version 1.20.1 -->
<!-- CreationDate: Sat Jul 23 17:04:04 2011 -->
<title></title>
</head>
<body>

<hr/>


<p>collectfs &minus; Collect Filesystem.</p>

<p style="margin-top: 1em">[ ]...</p>

<p style="margin-top: 1em">[ ]...</p>

<p style="margin-top: 1em">Collectfs is a FUSE userspace
filesystem that provides add-on trash collection for a
directory hierarchy. Any file that is overwritten by remove
(unlink), move, link, symlink, or open-truncate is relocated
to a trash directory. Removed files are date-time stamped so
that edit history is maintained (a version number is
appended if the same file is collected more than once in the
same second).</p>

<p style="margin-top: 1em">The trash directory duplicates
the structure (but no permissions) of the original directory
to provide some context for recovery. Collectfs uses rename
to collect files - this requires no data to be copied.
Because collectfs relies on rename, the trash directory must
reside within the hierarchy being collected (i.e. the same
physical filesystem).</p>

<p style="margin-top: 1em">Only normal files are collected.
Symbolic links are collected, but only as links. Fifos are
not collected. Directories are only collected if necessary
to preserve file content - there is no protection for empty
directories.</p>

<p style="margin-top: 1em">Collectfs is intended to be
useful for development projects where users may wish to
preserve the changes they&rsquo;ve made as they modify or
edit files.</p>

<p style="margin-top: 1em">Output a trace of each FUSE
operation performed by collectfs. Normally this would be
passed to the system log unless the -f option is also
applied.</p>

<p style="margin-top: 1em">Instruct FUSE to run in the
foreground and direct output normally sent to the system log
to the standard error stream.</p>

<p style="margin-top: 1em">Collectfs help. A short usage
and options summary and exit.</p>

<p style="margin-top: 1em">Access the fuse usage and
options summary and exit.</p>

<p style="margin-top: 1em">Report collectfs version and
exit.</p>

<p style="margin-top: 1em">Make a development project
directory and use collectfs to protect it. <br/>
mkdir my_project_src <br/>
mkdir my_project <br/>
collectfs my_project_src my_project <br/>
touch my_project/code.c <br/>
rm my_project/code.c <br/>
ls my_project/.trash/ <br/>
usermount -u my_project <br/>
The real source of the project is , but the developer works
within the mount-point gaining protection of collectfs.
Files are moved to .trash when ever they get clobbered.</p>

<p style="margin-top: 1em">if set, log all FUSE filesystem
operations. if set use an alternative trash directory name
(the default is .trash). Only the name can be specified, no
path element is accepted. The trash directory will always
reside at the top of the filesystem.</p>

<p style="margin-top: 1em">Collectfs does not currently
preserve permissions when duplicating directory hierarchies.
Directories under the trash folder will be created with the
current umask. Because of this, files moved to the trash
folder may become more accessible to other users than
before.</p>

<p style="margin-top: 1em">Empty directories aren&rsquo;t
protected. Collectfs is currently aimed at preserving files
and some associated directory context.</p>

<p style="margin-top: 1em">The trash directory is visible
within the collectfs, if you perform file operations such as
rm on trashed files inside mounted collectfs, the collectfs
will simply move them a trash directory inside the trash
directory (rm -r on the trash folder just results in a trash
folder in the trash folder and a &quot;Directory not
empty&quot; error). Note, if you can really remove files
from the trash by using the real non-fuse path to the trash
folder.</p>

<p style="margin-top: 1em">There may be bugs that
permanently destroy files. I&rsquo;ve been using collectfs
to create collectfs. Other than this, testing has been
limited. As a development tool it works for me, I also
backup my system each day. You need to make your own
assessment of how much trust you want to place in collectfs
and what measures you should take to protect yourself from
any bugs that might be present.</p>

<p style="margin-top: 1em">Michael Hamilton</p>


<p style="margin-top: 1em">http://fuse.sourceforge.net/</p>

<p style="margin-top: 1em">by Joseph J. Pfeiffer <br/>
http://www.cs.nmsu.edu/~pfeiffer/fuse-tutorial/</p>

<p style="margin-top: 1em">FUSE examples by John Cobb &amp;
Radek Podgorny <br/>

http://sysdocs.stu.qmul.ac.uk/sysdocs/Comment/FuseUserFileSystems/</p>

<p style="margin-top: 1em">Copyright 2011, Michael
Hamilton.</p>

<p style="margin-top: 1em">Collectfs is free software; you
can redistribute it and/or modify it under the terms of the
GNU General Public License as published by the Free Software
Foundation; either version 3, or (at your option) any later
version.</p>
<hr/>
</body>
</html>
